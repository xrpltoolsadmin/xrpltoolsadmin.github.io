(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b6d7fcd"],{"490d":function(t,e,n){"use strict";n("a440")},"9e9c":function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return f}));var i=n("1da1"),o=(n("96cf"),n("e9c4"),n("d3b7"),n("9a90")),r=n("2b0e"),a=r["default"].prototype,c=Object(o["b"])();function l(t,e){var n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.jwtToken},body:JSON.stringify(e)};return fetch(t,n)}function s(t,e){var n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.jwtToken},body:JSON.stringify(e)};return fetch(t,n)}function u(t){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.jwtToken}};return fetch(t,e)}function f(t){var e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.jwtToken}};return fetch(t,e)}function d(t){t&&401==t.code&&(Object(o["c"])(),a.$router.push("/login"))}var m=window,p=m.fetch;window.fetch=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.apply(void 0,n);case 2:return e=t.sent,e.clone().json().then((function(t){return d(t)})).catch(),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))},a440:function(t,e,n){},b625:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notifications-cont basic-cont"},[n("el-row",[n("div",{staticClass:"notifications-form-cont"},[n("el-col",{attrs:{xs:24,sm:24,md:t.airdropSchedule?24:12,lg:t.airdropSchedule?24:12}},[n("h4",[t._v("NOTIFICATION DISPLAY")]),n("el-form",{ref:"notificationsForm",attrs:{model:t.form,rules:t.rule,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Title",prop:"title"}},[n("el-input",{attrs:{placeholder:"e.g: Scam alert!"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"Description",prop:"description"}},[n("el-input",{staticStyle:{"margin-top":"10px !important"},attrs:{placeholder:"Complete information here",type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),n("el-form-item",{attrs:{label:"Icon URL",prop:"iconUrl"}},[n("el-col",{attrs:{xs:17,sm:17,md:17,lg:17}},[n("el-input",{model:{value:t.form.iconUrl,callback:function(e){t.$set(t.form,"iconUrl",e)},expression:"form.iconUrl"}})],1),n("el-col",{attrs:{xs:6,sm:6,md:6,lg:6}},[n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"default"},on:{click:function(e){return t.applyAirdropIcon()}}},[t._v("Use Airdrop Icon")])],1)],1),n("el-form-item",{attrs:{label:"Target Date/Time",prop:!0===t.sendNow?"":"targetDateTime"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-ddTHH:mm:ss",format:"MMM dd, yyyy h:mm A",disabled:!0===t.sendNow,type:"datetime",placeholder:"Date when notification will be sent"},model:{value:t.form.targetDateTime,callback:function(e){t.$set(t.form,"targetDateTime",e)},expression:"form.targetDateTime"}}),n("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.sendNow,callback:function(e){t.sendNow=e},expression:"sendNow"}},[t._v("Send Now")])],1),n("el-form-item",{attrs:{label:"Link",prop:"actionButtonLink"}},[n("el-input",{model:{value:t.form.actionButtonLink,callback:function(e){t.$set(t.form,"actionButtonLink",e)},expression:"form.actionButtonLink"}})],1),n("el-form-item",[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],attrs:{type:"primary"},on:{click:function(e){return t.clickedButton()}}},[t._v(t._s(!0===t.sendNow?"Send Now":"Queue"))]),n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.clearForm()}}},[t._v("Clear")])],1)],1)],1)],1)]),n("el-row",[n("div",{staticClass:"notifications-list-cont pane-cont"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.notificationListLoading,expression:"notificationListLoading"}],attrs:{data:t.notificationList,fit:""},on:{"row-click":t.rowClick}},[n("el-table-column",{attrs:{align:"left",label:"Title"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}}])}),n("el-table-column",{attrs:{align:"left",label:"Description"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{content:e.row.description}},[n("span",{staticClass:"description-row"},[t._v(t._s(e.row.description))])])]}}])}),n("el-table-column",{attrs:{align:"left",label:"Icon URL"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"description-row"},[n("a",{staticClass:"link",attrs:{href:e.row.iconUrl,target:"_blank"}},[t._v(t._s(e.row.iconUrl))])])]}}])}),n("el-table-column",{attrs:{align:"left",label:"Button Link"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"description-row"},[n("a",{staticClass:"link",attrs:{href:e.row.actionButtonLink,target:"_blank"}},[t._v(t._s(e.row.actionButtonLink))])])]}}])}),n("el-table-column",{attrs:{align:"left",label:"Target Date/Time"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.targetDateTime?t.moment(String(e.row.targetDateTime)).format("lll"):"")+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"Sent?"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(!0===e.row.isSent?"Y":"N")+" ")]}}])})],1)],1)])],1)},o=[],r=n("9e9c"),a="https://xrpltools-api.azurewebsites.net/api/v1";function c(){return Object(r["b"])(a+"/notifschedule/")}function l(t){return Object(r["c"])(a+"/notifschedule/",t)}function s(t){return Object(r["c"])(a+"/notifschedule/now",t)}var u=n("c1df"),f=n.n(u),d={data:function(){return{form:{id:"",title:"",description:"",iconUrl:"",actionButtonLink:"",targetDateTime:"",pushMode:"MANUAL"},moment:f.a,notificationList:null,notificationListLoading:!1,sendNow:!1,formLoading:!1,rule:{title:{required:!0,message:"Title is required"},description:{required:!0,message:"Description is required"},iconUrl:{required:!0,message:"Icon URL is required"},targetDateTime:{required:!0,validator:this.validateTargetDate},actionButtonLink:{required:!0,message:"Link is required"}}}},created:function(){},mounted:function(){this.fetchNotifcationSchedules()},methods:{applyAirdropIcon:function(){this.form.iconUrl="images/xrp-airdrop-icon.png"},validateTargetDate:function(t,e,n){if(e&&null!=e&&""!==e){var i=f()(),o=i.add(1,"minutes"),r=f()(e);r<o?n(new Error("Time must be 1 minute greater than the current date/time")):n()}else n(new Error("Target Date/Time is required"))},rowClick:function(t){},fetchNotifcationSchedules:function(){var t=this;t.notificationListLoading=!0,c().then((function(t){return t.json()})).then((function(e){t.notificationListLoading=!1,t.notificationList=e}))},clickedButton:function(){var t=this,e=this;e.$refs["notificationsForm"].validate((function(n){1==n&&(e.formLoading=!0,!0===t.sendNow?e.sendNotifScheduleNow():e.queueNotifSchedule())}))},queueNotifSchedule:function(){var t=this;l(this.form).then((function(t){return t.json()})).then((function(e){t.$message.success("Successfully queued notification!"),t.formLoading=!1,t.clearForm(),t.fetchNotifcationSchedules()}))},sendNotifScheduleNow:function(){var t=this;s(this.form).then((function(t){return t.json()})).then((function(e){t.$message.success("Successfully sent notification!"),t.formLoading=!1}))},clearForm:function(){this.form={id:"",title:"",description:"",iconUrl:"",actionButtonLink:"",targetDateTime:"",pushMode:"MANUAL"},this.sendNow=!1}}},m=d,p=(n("490d"),n("2877")),h=Object(p["a"])(m,i,o,!1,null,null,null);e["default"]=h.exports}}]);